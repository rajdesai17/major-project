<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Health Care Center</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #121212;
            color: #ffffff;
        }

        .navbar {
            background-color: #1e1e1e !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            padding: 0.5rem 1rem;
        }

        .container {
            background: #1e1e1e;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .form-control {
            background: #2d2d2d;
            border: none;
            color: #ffffff;
            padding: 12px;
        }

        .form-control:focus {
            background: #363636;
            color: #ffffff;
            box-shadow: 0 0 0 2px #4a90e2;
        }

        .btn-primary {
            background: #4a90e2;
            border: none;
        }

        .modal-content {
            background: #1e1e1e;
            color: #ffffff;
        }

        .toggle-button {
            background: #2d2d2d !important;
            color: #ffffff !important;
            border: none;
            transition: transform 0.2s;
        }

        .toggle-button:hover {
            transform: translateY(-2px);
        }

        .chatbot-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: #4a90e2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }

        .chatbot-icon:hover {
            transform: scale(1.1);
        }

        .chatbot-icon::before {
            content: '🤖';
            font-size: 30px;
        }

        .logo {
            margin-right: 20px;
        }
        
        .logo img {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: cover;
        }

        .chat-container {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 300px;
            height: 400px;
            background: #1e1e1e;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .chat-header {
            background: #4a90e2;
            color: white;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            font-weight: 500;
        }

        .chat-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            background: #2d2d2d;
        }

        .chat-input {
            padding: 15px;
            background: #1e1e1e;
            border-radius: 0 0 15px 15px;
            display: flex;
        }

        .chat-input input {
            flex-grow: 1;
            padding: 8px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            background: #2d2d2d;
            color: white;
        }

        .chat-input button {
            padding: 8px 15px;
            background: #4a90e2;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
        }

        .logo .myimg {
            border: none;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Chat container -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            Health Assistant
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- Messages will be added here -->
        </div>
        <div class="chat-input">
            <input type="text" placeholder="Type your message..." id="chatInput">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <!-- Logo at the top-left corner -->
            <div class="logo">
                <img class="myimg" src="{{ url_for('static', filename='img.png') }}" alt="">
            </div>

            <a class="navbar-brand" href="#">Health Center</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">About</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact</a>
                    </li>
                    <!-- <li class="nav-item">
                        <a class="nav-link" href="/developer">Developer</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">Blog</a>
                    </li> -->
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="chatbot-icon"></div>

<!-- Update the main form section -->
<h1 class="mt-5 pt-5 text-center" style="color: #4a90e2; font-weight: 600;">AI-Powered Health Analysis</h1>
<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="form-container" style="background: #1e1e1e; border-radius: 15px; padding: 40px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);">
                <form action="/predict" method="post">
                    <div class="form-group">
                        <label for="symptoms" style="color: #4a90e2; font-weight: 500; margin-bottom: 10px;">Describe Your Symptoms:</label>
                        <input type="text" class="form-control" id="symptoms" name="symptoms" 
                            placeholder="E.g., fever, headache, fatigue..." 
                            style="padding: 15px; margin-bottom: 20px; background: #2d2d2d; border: 1px solid #363636; color: white;">
                    </div>
                    
                    <button type="button" id="startSpeechRecognition" class="btn btn-outline-primary mb-3" 
                        style="width: 100%; padding: 12px; border-radius: 10px; background: transparent; border: 2px solid #4a90e2;">
                        <i class="fas fa-microphone"></i> Start Voice Input
                    </button>

                    <div id="transcription" class="mt-3 p-3" style="background: #2d2d2d; border-radius: 8px; min-height: 50px; display: none;"></div>

                    {% if message %}
                    <div class="alert alert-info mt-3">{{ message }}</div>
                    {% endif %}

                    <button type="submit" class="btn btn-primary mt-4" 
                        style="width: 100%; padding: 15px; border-radius: 10px; background: #4a90e2; border: none; font-weight: 500;">
                        Analyze Symptoms
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

{% if predicted_disease %}

<!-- Results -->
<h1 class="text-center my-4 mt-4">Our AI System Results</h1>
<div class="container">

    <div class="result-container">
        <!-- Buttons to toggle display -->
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#diseaseModal" style="padding:4px;  margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F39334;color:black;">Disease</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#descriptionModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#268AF3 ;color:black;">Description</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#precautionModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#F371F9 ;color:black;">Precaution</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#medicationsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px;border-radius:5px; background:#F8576F ;color:black;">Medications</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#workoutsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#99F741 ;color:black;">Workouts</button>
        <button class="toggle-button" data-bs-toggle="modal" data-bs-target="#dietsModal" style="padding:4px; margin: 5px 40px 5px 0; font-size:20px;font-weight:bold; width:140px; border-radius:5px; background:#E5E23D;color:black;">Diets</button>
    </div>
</div>

{% endif %}

<!-- Disease Modal -->
    <div class="modal fade" id="diseaseModal" tabindex="-1" aria-labelledby="diseaseModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;"> <!-- Set header background color inline -->
                    <h5 class="modal-title" id="diseaseModalLabel">Predicted Disease</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="background-color: #modal-body-color;"> <!-- Set modal body background color inline -->
                    <p>{{ predicted_disease }}</p>
                </div>
            </div>
        </div>
    </div>


    <!-- Description Modal -->
    <div class="modal fade" id="descriptionModal" tabindex="-1" aria-labelledby="descriptionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="descriptionModalLabel">Description</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>{{ dis_des }}</p>
                </div>
            </div>
        </div>
    </div>

<!-- Precaution Modal -->
    <div class="modal fade" id="precautionModal" tabindex="-1" aria-labelledby="precautionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="precautionModalLabel">Precaution</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in my_precautions %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>




    <!-- Medications Modal -->
    <div class="modal fade" id="medicationsModal" tabindex="-1" aria-labelledby="medicationsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="medicationsModalLabel">Medications</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in medications %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Workouts Modal -->
    <div class="modal fade" id="workoutsModal" tabindex="-1" aria-labelledby="workoutsModalLabel" aria-hidden="true">
        <div class="modal-dialog" >
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="workoutsModalLabel">Workouts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in workout %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Diets Modal -->
    <div class="modal fade" id="dietsModal" tabindex="-1" aria-labelledby="dietsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="dietsModalLabel">Diets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in my_diet %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>



        <script>
    const startSpeechRecognitionButton = document.getElementById('startSpeechRecognition');
    const transcriptionDiv = document.getElementById('transcription');

    startSpeechRecognitionButton.addEventListener('click', startSpeechRecognition);

    function startSpeechRecognition() {
        const recognition = new webkitSpeechRecognition(); // Use webkitSpeechRecognition for compatibility

        recognition.lang = 'en-US'; // Set the language for recognition

        recognition.onresult = function (event) {
            const result = event.results[0][0].transcript;
            transcriptionDiv.textContent = result;
        };

        recognition.onend = function () {
            console.log('Speech recognition ended.');
        };

            </div>
        recognition.start();
    }

    const chatbot = document.querySelector('.chatbot-icon');
    const chatContainer = document.getElementById('chatContainer');
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    let isChatOpen = false;

    chatbot.addEventListener('click', () => {
        isChatOpen = !isChatOpen;
        chatContainer.style.display = isChatOpen ? 'flex' : 'none';
        if (isChatOpen) {
            // Add welcome message
            addMessage('bot', 'Hello! How can I help you today?');
        }
    });

    function addMessage(sender, text) {
        const messageDiv = document.createElement('div');
        messageDiv.style.marginBottom = '10px';
        messageDiv.style.padding = '8px';
        messageDiv.style.borderRadius = '5px';
        messageDiv.style.maxWidth = '80%';
        
        if (sender === 'user') {
            messageDiv.style.marginLeft = 'auto';
            messageDiv.style.background = '#4a90e2';
        } else {
            messageDiv.style.background = '#363636';
        }
        
        messageDiv.textContent = text;
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function sendMessage() {
        const message = chatInput.value.trim();
        if (message) {
            addMessage('user', message);
            chatInput.value = '';
            // Simulate bot response
            setTimeout(() => {
                addMessage('bot', 'Thank you for your message. A healthcare professional will respond shortly.');
            }, 1000);
        }
    }

    // Allow sending message with Enter key
    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>

</html>
        </div>
    </div>

    <!-- Workouts Modal -->
    <div class="modal fade" id="workoutsModal" tabindex="-1" aria-labelledby="workoutsModalLabel" aria-hidden="true">
        <div class="modal-dialog" >
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="workoutsModalLabel">Workouts</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in workout %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Diets Modal -->
    <div class="modal fade" id="dietsModal" tabindex="-1" aria-labelledby="dietsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: #020606; color:white;">
                    <h5 class="modal-title" id="dietsModalLabel">Diets</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul>
                        {% for i in my_diet %}
                            <li>{{ i }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- New Disease Cards Section -->
    <div class="container disease-cards">
        <h2 class="text-center mb-5" style="color: #4a90e2;">Common Health Conditions</h2>
        <div class="row">
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">🫁</div>
                    <h4>Respiratory Conditions</h4>
                    <p>Learn about common respiratory conditions including asthma, bronchitis, and pneumonia. Understand symptoms and treatment options.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">❤️</div>
                    <h4>Heart Disease</h4>
                    <p>Explore cardiovascular health, risk factors, prevention strategies, and modern treatment approaches.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">🧠</div>
                    <h4>Mental Health</h4>
                    <p>Discover resources for mental health conditions, including anxiety, depression, and stress management.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">🦠</div>
                    <h4>Infectious Diseases</h4>
                    <p>Information about various infectious diseases, their spread, prevention, and treatment protocols.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">🩺</div>
                    <h4>Chronic Conditions</h4>
                    <p>Understanding long-term health conditions, management strategies, and lifestyle modifications.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="disease-card">
                    <div class="disease-card-icon">🧬</div>
                    <h4>Genetic Disorders</h4>
                    <p>Learn about hereditary conditions, genetic testing, and available treatment options.</p>
                </div>
            </div>
        </div>
    </div>

        <script>
    const startSpeechRecognitionButton = document.getElementById('startSpeechRecognition');
    const transcriptionDiv = document.getElementById('transcription');

    startSpeechRecognitionButton.addEventListener('click', startSpeechRecognition);

    function startSpeechRecognition() {
        const recognition = new webkitSpeechRecognition(); // Use webkitSpeechRecognition for compatibility

        recognition.lang = 'en-US'; // Set the language for recognition

        recognition.onresult = function (event) {
            const result = event.results[0][0].transcript;
            transcriptionDiv.textContent = result;
        };

        recognition.onend = function () {
            console.log('Speech recognition ended.');
        };

        recognition.start();
    }

    const chatbot = document.querySelector('.chatbot-icon');
    const chatContainer = document.getElementById('chatContainer');
    const chatMessages = document.getElementById('chatMessages');
    const chatInput = document.getElementById('chatInput');
    let isChatOpen = false;

    chatbot.addEventListener('click', () => {
        isChatOpen = !isChatOpen;
        chatContainer.style.display = isChatOpen ? 'flex' : 'none';
        if (isChatOpen) {
            // Add welcome message
            addMessage('bot', 'Hello! How can I help you today?');
        }
    });

    function addMessage(sender, text) {
        const messageDiv = document.createElement('div');
        messageDiv.style.marginBottom = '10px';
        messageDiv.style.padding = '8px';
        messageDiv.style.borderRadius = '5px';
        messageDiv.style.maxWidth = '80%';
        
        if (sender === 'user') {
            messageDiv.style.marginLeft = 'auto';
            messageDiv.style.background = '#4a90e2';
        } else {
            messageDiv.style.background = '#363636';
        }
        
        messageDiv.textContent = text;
        chatMessages.appendChild(messageDiv);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function sendMessage() {
        const message = chatInput.value.trim();
        if (message) {
            addMessage('user', message);
            chatInput.value = '';
            // Simulate bot response
            setTimeout(() => {
                addMessage('bot', 'Thank you for your message. A healthcare professional will respond shortly.');
            }, 1000);
        }
    }

    // Allow sending message with Enter key
    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
</body>

</html>